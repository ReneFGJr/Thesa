import { Component } from '@angular/core';
import { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';
import { ThesaServiceService } from 'src/app/service/thesa-service.service';
import { LocalStorageService } from 'src/app/service/local-storage.service';


@Component({
  selector: 'app-wordcount',
  templateUrl: './wordcount.component.html',
})
export class WordcountComponent {
  public words: number = 0;
  public myForm: FormGroup | any;
  public th: number = 0;
  public data: Array<any> | any;


  public sample: string = '4	RECUPERAÇÃO DA INFORMAÇÃO\nConsideramos importante trazer considerações sobre a Recuperação da Informação (RI) que Hjorland (2021) considera uma área de pesquisa distinta da Organização do Conhecimento. Considera o autor que a RI, atualmente, está mais próxima da Ciência da Computação e defende a ideia de um trabalho conjunto entre especialistas em Sistemas de Organização do Conhecimento e cientistas da computação para que seja possível “fornecer documentos e conhecimentos que estejam de acordo com nossas reivindicações de conhecimento mais bem fundamentadas” (HJORLAND, 2021, p. 22).\nFerneda (2003, p. 11), parafraseando Saracevic (1999) afirma que “a recuperação de Informação pode ser considerada a vertente tecnológica da Ciência da Informação e é resultado da relação desta com a Ciência da Computação”.\nBaeza-Yates e Ribeiro-Neto (2013), posicionam a Recuperação da Informação como área de estudo da Ciência da Computação, afirmando que um de seus objetivos é permitir que os usuários de um sistema informatizado possam obter acesso a informações, que lhes interessam, de forma fácil.\nOs estudos de Recuperação Inteligente da Informação versam especificamente sobre o uso de Sistemas informatizados para atingir de forma eficiente o objetivo de recuperar informação em um âmbito específico, seja corporativo ou mesmo em ambiente da Internet.\nSequência de passos é necessária para a Recuperação da Informação, as etapas podem ser a formação da coleção de documentos que serão alvos da busca, a indexação, a formulação de uma consulta pelo usuário, a expansão da consulta, o processamento, onde os termos da consulta são efetivamente buscados no índice e por fim o ranqueamento dos documentos recuperados.\nTodos esses passos são de grande importância para o sucesso de um sistema de recuperação de Informação, porém, neste trabalho queremos destacar a fase de expansão da consulta no âmbito da Recuperação Inteligente da Informação.\n\nFerneda (2003, p. 14), para esclarecer de forma sintetizada como pensam alguns autores sobre a Recuperação da Informação afirma que:\nNo contexto da Ciência da Informação, o termo “recuperação de informação” significa, para uns, a operação pela qual se seleciona documentos, a partir do acervo, em função da demanda do usuário. Para outros, “recuperação de informação” consiste no fornecimento, a partir de uma demanda definida pelo usuário, dos elementos de informação documentária correspondentes. O termo pode ainda ser empregado para designar a operação que fornece uma resposta mais ou menos elaborada a uma demanda, e esta resposta é convertida num produto cujo formato é acordado com o usuário (bibliografia, nota de síntese etc.).\nCaso se planejasse realizar a construção de um Sistema de Recuperação de Informação destinado a realizar buscas nos autos de Inquéritos Policiais o primeiro passo seria a formação de um corpus de documentos que abrangeria todas as peças relacionadas a cada IPL instaurado pela Polícia Federal em todo o Brasil e armazenadas em seus sistemas.\nUma vez que tenhamos esse repositório central com todos os documentos, que contêm as informações que possam interessar a um policial (usuário do sistema) que necessita realizar uma consulta, esses documentos precisam ser indexados.\nSobre essa indexação Baeza-Yates e Ribeiro-Neto (2013, p. 6) afirmam que:\nOs documentos no repositório central precisam ser indexados para que a recuperação e o ranqueamento sejam efetuados rapidamente. A estrutura de índice mais utilizada é o índice invertido composto por todas as palavras distintas da coleção e para cada palavra, a lista de documentos que a contém. Na criação do índice invertido devem ser excluídas todas as palavras consideradas stop words, como artigos, conectores e aquelas que aparecem em praticamente todos os documentos.\nO SRI deve disponibilizar uma interface onde o usuário possa inserir os termos que pretende consultar com o fim de recuperar a informação pretendida, normalmente trata-se de um campo de busca onde são digitadas as palavras ou expressões pelo usuário e por fim acionado o mecanismo de busca.\nUma vez especificados os termos de interesse do usuário, para uma maior eficiência na recuperação, a consulta precisa ser expandida, associando a ela outras informações que possam ampliar as possibilidades de recuperação, exemplificando de maneira simplista, caso o policial pretenda recuperar documentos que tragam informação sobre “abuso sexual infantojuvenil”, o sistema, na expansão da consulta, poderia ampliar esse parâmetro, acrescentando na busca, termos próximos ou sinônimos como “pedofilia”, “pornografia infantil” ou “estupro de vulnerável”.\nCorroborando com o que foi exposto acima, podemos citar Baeza-Yates e Ribeiro-Neto (2013, p. 7) quando discorrem que:\nPara realizar uma busca, o usuário primeiro especifica uma consulta que reflete sua necessidade de informação. A seguir, a consulta é analisada sintaticamente e expandida com, por exemplo, formas variantes das palavras da consulta. A consulta expandida, que chamaremos de consulta do sistema, é então processada, utilizando-se o índice para recuperar um subconjunto dos documentos.\nConsiderando que o corpus de documentos está devidamente armazenado e tratado, sendo então criado o índice invertido, onde todos os termos importantes que existem nos documentos são listados e associados a aqueles que os contém; uma vez que a consulta seja realizada pelo usuário, e posteriormente expandida; a consulta do Sistema é confrontada com o índice e os documentos correspondentes são recuperados.\nTendo sido recuperados os documentos tidos como de interesse para o usuário, devem finalmente serem submetidos a um ranqueamento com o fim de apresentá-los numa ordem de importância, exibindo com prioridade os que tenham maior probabilidade de serem considerados mais úteis.\nO funcionamento de um Sistema de Recuperação de Informações pode ser avaliado considerando vários parâmetros, sendo os principais a precisão e a revocação.\nA precisão considera a quantidade de documentos que foram recuperados que são realmente relevantes para as necessidades de informação do usuário. No exemplo de consulta que foi utilizado anteriormente, a precisão da recuperação de Informações seria considerada maior, conforme a quantidade de documentos recuperados que tratassem de investigações de crimes relacionados a abuso sexual infantojuvenil. Dentre os documentos que forem recuperados pela consulta, quanto maior for a quantidade daqueles considerados relevantes, maior será a precisão e mais eficiente seria considerado o Sistema.\nJá a revocação é medida conforme a quantidade de documentos relevantes que existem no corpus e que são efetivamente recuperados pela consulta. Novamente considerando o exemplo de consulta de termo utilizado anteriormente nesse texto, caso existam na base de dados centenas de documentos que versem sobre investigações de crimes relacionados a abuso sexual infantojuvenil, quanto maior o número desses documentos que sejam efetivamente recuperados, maior a revocação do Sistema.\nPara que um sistema tenha os melhores índices de precisão e revocação, vários dos componentes de um Sistema de Recuperação de Informação precisam ser aprimorados e desenvolvidos com o máximo de eficiência e entre eles está o componente responsável pela expansão de consultas\nQuando um usuário de um Sistema de Recuperação de Informação precisa encontrar documentos que atendam a uma necessidade específica, irá realizar uma consulta usando como parâmetro de busca, termos ou frases que ele entende que trarão o melhor retorno possível.\nOs termos escolhidos pelo usuário, nem sempre serão os mais adequados ou suficientes para uma recuperação eficiente e nessa hora os componentes inteligentes do sistema precisam ser utilizados, expandindo a consulta do usuário para chegar a uma consulta que permita uma recuperação mais abrangente e de qualidade.\nGonzalez e Strube de Lima (2003, p. 30) explicam que a expansão de consulta pode ter o objetivo de tornar o conjunto de documentos recuperados maior ou ainda melhorar a precisão da recuperação, no primeiro caso:\n[...] os termos expandidos são selecionados entre aqueles similares aos originais encontrados na consulta. Seriam considerados similares aqueles que possuem significado semelhante, mas nem sempre são sinônimos, como “casa” e “prédio”.\nJá no segundo caso:\n[...] os termos adicionados não são similares, porém apresentam algum tipo de relacionamento (como o que ocorre entre “casa” e “morar”) com os termos originais, deduzido por motivação linguística ou através de dados estatísticos.\nCardoso (2008, p. 2), chama de Reformulação Automática de Consultas a técnica que:\n[...] procura reformular a consulta inicial do utilizador de forma automática, adicionando termos fortemente relacionados com a pesquisa, removendo termos irrelevantes ou geradores de ruído, e atribuindo pesos de importância a cada termo. No final, a linha de consulta reformulada será mais precisa e fiel à necessidade de informação real do utilizador, e mais robusta em relação às diferenças de vocabulário patente entre documentos e consultas.\nOs Sistemas de Organização do Conhecimento podem ser utilizados na expansão de consultas em Sistemas de Recuperação da Informação, Baeza-Yates e Ribeiro-Neto (2013) discutem sobre duas variações possíveis para a análise global, ambas baseadas em tesauros, são elas a “expansão de consulta baseada em um tesauro de similaridade” e a “expansão de consultas com base em um tesauro estatístico”.\nFachin (2010, p. 259) implementou importante pesquisa sobre a existência de “aplicações de mecanismos de Recuperação Inteligente da Informação que usem ontologia como recurso na recuperação precisa e eficaz da Informação”, ao final encontrou quatro artigos que tratam do tema e que foram analisados. \
    Saias (2003, p. 29) acredita que:\nComo meio estruturado capaz de representar informação semântica, as ontologias podem ser utilizadas no âmbito de Sistemas de Recuperação de Informação com o objectivo de melhorar os resultados. A existência de relações hierárquicas, e não só, sobre a semântica da informação poderá potenciar uma melhoria da eficiência nos SRI.\nPrincipalmente no contexto de um domínio específico, nos parece que o uso de ontologias, bem como tesauros, pode incrementar em muito a eficiência da recuperação da informação.\nConsiderando tudo o que foi exposto concluímos que para aprimorar a recuperação de informação nos autos de IPL, necessariamente é preciso implementar um Sistema de Organização do Conhecimento e para tanto, faz-se necessário um Mapeamento Terminológico.\n5	METODOLOGIA\nConsiderando a totalidade dessa pesquisa, a classificamos quanto a sua finalidade como uma pesquisa aplicada, visto que busca colaborar na solução de um problema específico que é a recuperação do conhecimento contido nos autos do Inquérito Policial de forma mais eficiente (PRODANOV; FREITAS, 2013).\nQuanto aos objetivos da pesquisa, a classificamos como exploratória, considerando que acaba por realizar o mapeamento terminológico em um domínio específico formado por profissionais policiais, membros da Polícia Federal e cuja missão é investigar crimes relacionados ao abuso infantojuvenil.\nA abordagem usada é qualitativa, tendo o autor uma atuação fundamental ao buscar conceitos teóricos e analisar as peças utilizadas como base para a extração de termos, sem preocupações estatísticas ou quantificação de dados analisados.\nPor fim, cabe esclarecer que os procedimentos adotados durante o trabalho envolvem a pesquisa bibliográfica e documental.\nO método utilizado, para atingir os objetivos propostos, iniciou-se com uma revisão bibliográfica que teve como finalidade buscar esclarecimentos sobre o trabalho da Polícia Federal na execução de sua função investigativa, quando atua na apuração de infrações penais e materializa todo o trabalho nos autos de Inquérito Policial. Esta etapa proporcionou a identificação do problema na recuperação do conhecimento gerado e armazenado, atualmente, com uso do sistema ePol.\nAinda utilizando o método de pesquisas bibliográficas, buscou-se situar a pesquisa no contexto da Ciência da Informação, mais especificamente nas áreas de estudo da Organização do Conhecimento e da Recuperação da Informação. Esta fase trouxe ainda, noções de Sistemas de Organização do Conhecimento e procedimentos para sua implementação, Sistemas de Recuperação Inteligente da Informação, bem como definições de termos como “informação” e “conhecimento”.\nA análise da bibliografia deu suporte à formulação do método exposto a seguir, para realização de mapeamento terminológico objetivando propiciar melhorias na recuperação do conhecimento contido nos autos de inquéritos policiais federais.\nCom base em Campos, Gomes e Motta (2004) e Shitaku et al. (2021) o método de desenvolvimento de cada fase do mapeamento terminológico está descrito a seguir.\n1)	Planejamento:\na)	Delimitação do tema:\nAutos de Inquérito Policial referentes às investigações de crimes relacionados a abusos sexuais infantojuvenil na Internet.\nb)	Identificação do público ao qual o tesauro se destina:\nPoliciais Federais que atuam em investigações relacionadas a abuso sexual infantojuvenil em todo território nacional.\nc)	Levantamento de fontes para a busca dos termos que constituirão o tesauro:\nDos Autos de Inquérito Policial, selecionamos 20 documentos. A escolha das peças foi por documentos produzidos por policiais no curso das investigações, endereçados ao Delegado que preside os autos e, geralmente, com uso de linguagem própria do domínio.\nOs documentos selecionados apresentam uma variação quanto aos seus autores, evitando documentos produzidos por um único policial. Isso se faz necessário porque os Policiais Federais que participam das investigações possuem formação em diferentes áreas do saber e isso pode influenciar, de alguma forma, nos termos e estilo de escrita por eles utilizados na redação, o que pode trazer maior riqueza terminológica.\n2)	Levantamento de vocabulário\na)	Coleta dos termos:\nFoi realizada uma leitura qualitativa na íntegra das peças em busca de termos que pudessem refletir a linguagem do domínio. Foram coletados termos considerando todas as variações gramaticais e semânticas observadas.\nb)	Organização dos conceitos:\nAos serem coletados, os termos foram agrupados primeiramente sendo inseridos em uma tabela, usando um editor de textos. A análise dos termos coletados permitiu a definição de categorias. Para definição dos conceitos, inicialmente foi realizada busca em normas legais, com objetivo de verificar se já existe uma definição deles, quando positivo, foi avaliado se ela se encaixa à realidade do domínio. Quando não foi encontrada uma definição na legislação, a busca continuou em obras de doutrina das ciências policiais, jurídicas e até mesmo da Tecnologia da Informação, conforme o caso. Também foi considerada a própria evidência semântica do discurso apresentado no texto analisado.\n3)	Forma de apresentação:\nComo explanado no item anterior, o levantamento inicial dos termos e sua categorização foram registrados em editor de texto simples, uma vez concluída essa etapa, os termos coletados foram revisados com o objetivo de confirmar sua adequação, realização de ajustes que sejam necessários e escolha dos termos descritores.\nPelo princípio da lógica, desdobrou-se (mas não se restringiu) relações conceituais hierárquicas e mapeamento de sinônimos entre os termos pertencentes a uma mesma categoria. Pelo mesmo princípio (mas não restringido), mapeou-se relações associativas entre termos de categorias diversas.\nOs termos, conceitos e relações foram inseridos no sistema Thesa. Uma vez inseridas as relações conceituais, o sistema produziu automaticamente uma visualização em forma de mapa semântico, que se configura em um formato amigável para que outros policiais possam compreender o mapeamento semântico.\n4)	Avaliação\nUtilizando uma funcionalidade da ferramenta Thesa, foi criado um arquivo PDF com o conteúdo do tesauro, sendo esse arquivo então encaminhado para três policiais federais, objetivando que indicassem concordância ou eventuais discordâncias quanto às categorias, termos escolhidos como descritores, conceitos e relações encontrados. Por meio de conversas telefônicas, foram dadas explicações básicas sobre a pesquisa e sobre o conteúdo do arquivo.'

  constructor(
    private formBuilder: FormBuilder,
    private thesaServiceService: ThesaServiceService,
    private LocalStorageService: LocalStorageService
  ) {}

  ngOnInit() {
    this.myForm = this.formBuilder.group({
      text: [this.sample, Validators.required],
      action: ['wordcount'],
      th: [this.th, Validators.required],
    });
  }

  submitForm() {
    if (this.myForm.valid) {
      let action = this.myForm.value.action
      this.thesaServiceService
        .api_post('tools/'+action, this.myForm.value)
        .subscribe((res) => {
          this.data = res;
          console.log(this.data)
        });
    } else {
      alert('Dados inclompletos');
    }
  }
}
