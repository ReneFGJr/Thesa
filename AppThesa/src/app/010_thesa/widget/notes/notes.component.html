---------------------------------------------------
{{thesaId}} - {{conceptId}}
---------------------------------------------------

<div *ngIf="(notasProp?.length > 0) || editMode" class="mt-2">
  <h6 *ngIf="editMode">
    Notas
    <i class="bi bi-plus-circle link" (click)="newNotes()"></i>
  </h6>

  <div *ngFor="let note of notes">
    <h5>Nota de {{ note.p_name }}</h5>
    <p class="small">{{ note.nt_content }}</p>
  </div>
</div>

<!-- Offcanvas para nova nota -->
<div
  #offcanvasNovo
  class="offcanvas offcanvas-end"
  tabindex="-1"
  aria-labelledby="offcanvasNovoLabel"
>
  <div class="offcanvas-header">
    <h5 id="offcanvasNovoLabel">Nova Nota</h5>
    <button
      type="button"
      class="btn-close text-reset"
      aria-label="Close"
      (click)="offcanvasInstance.hide()"
    ></button>
  </div>
  <div class="offcanvas-body">
    <form [formGroup]="formAction" (ngSubmit)="saveNote()">
      <!-- Tipo de nota -->
      <div class="mb-3">
        <label for="noteType" class="form-label">Tipo das notas</label>
        <select
          id="noteType"
          class="form-select"
          formControlName="property"
          size="6"
        >
          <option *ngFor="let prop of notasProp" [value]="prop.id">
            {{ prop.label }}
          </option>
        </select>
        <div
          *ngIf="
            formAction.get('property')?.touched &&
            formAction.get('property')?.invalid
          "
          class="text-danger small"
        >
          Selecione um tipo válido.
        </div>
      </div>

      <!-- Conteúdo da nota -->
      <div class="mb-3">
        <label for="noteContent" class="form-label">Conteúdo da nota</label>
        <textarea
          id="noteContent"
          class="form-control"
          rows="4"
          formControlName="nt_content"
        ></textarea>
        <div
          *ngIf="
            formAction.get('nt_content')?.touched &&
            formAction.get('nt_content')?.invalid
          "
          class="text-danger small"
        >
          O conteúdo deve ter ao menos 3 caracteres.
        </div>
      </div>

      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="formAction.invalid"
      >
        Salvar Nota
      </button>
    </form>
  </div>
</div>
